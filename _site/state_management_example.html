<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>State Management - hello world</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>State Management | hello world</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="State Management" /> <meta property="og:locale" content="en" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="http://localhost:4000/state_management_example.html" /> <meta property="og:url" content="http://localhost:4000/state_management_example.html" /> <meta property="og:site_name" content="hello world" /> <script type="application/ld+json"> {"@type":"WebPage","url":"http://localhost:4000/state_management_example.html","headline":"State Management","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> hello world </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">About</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/flutter_2.html" class="nav-list-link">Flutter Cheatsheet</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/flutter_nested_list.html" class="nav-list-link">Alternatif Nested List</a></li><li class="nav-list-item "><a href="http://localhost:4000/multimedia_encryption_example.html" class="nav-list-link">Enkripsi Konten Multimedia</a></li><li class="nav-list-item "><a href="http://localhost:4000/singleton_service_example.html" class="nav-list-link">Singleton Object</a></li><li class="nav-list-item active"><a href="http://localhost:4000/state_management_example.html" class="nav-list-link active">State Management</a></li><li class="nav-list-item "><a href="http://localhost:4000/state_management_eventbus_example.html" class="nav-list-link">State Management - Eventbus</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/flutter_1.html" class="nav-list-link">Messing with Flutter</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/play_asset_flutter.html" class="nav-list-link">Play Asset Delivery in Flutter</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search hello world" aria-label="Search hello world" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/yogurtpops" class="site-button" > Find me on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/flutter_2.html">Flutter Cheatsheet</a></li> <li class="breadcrumb-nav-list-item"><span>State Management</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p>Aplikasi state management dapat dilakukan dengan menggunakan <em>design pattern</em> seperti Provider, Bloc, dan ScopedModel. Sementara pada aplikasi yang sederhana kita bisa membuat state management tanpa <em>design pattern</em>. Implementasi demikian dapat dilakukan bila aplikasi memiliki tampilan sederhana dan pengembangan aplikasi dapat kita prediksi. Contoh dari tampilan yang sederhana adalah dimana kita bisa mendefinisikan widget ke dua kelompok, <em>parent</em> dan <em>child</em>, seperti tampilan ini. Pada tampilan ini, widget parent adalah container yang memuat seluruh halaman yang nampak. Widget child berupa komponen dalam tampilan, yaitu image selector dan image display. <img src="https://merry-drylands.cloudvent.net/assets/images/state_management.jpg" alt="Alt Text" /></p> <p>Perubahan state dapat kita lakukan dengan membuat fungsi di masing-masing widget. Bagaimana jika perubahan state sebuah widget mempengaruhi widget lainnya seperti ilustrasi ini? <img src="https://merry-drylands.cloudvent.net/assets/images/state_management.gif" alt="Alt Text" /></p> <p>Pada tampilan ini kita melakukan perubahan state pada beberapa widget. Widget child 1 menerima input saat user melakukan tap pada sebuah gambar. Kemudian widget child mengirim perubahan state ke parent widget. Kemudian parent widget mengirim perubahan state ke widget child 2. Maka kita bisa melakukan perubahan dengan cara berikut.</p> <ol> <li>Mengubah child dari parent</li> </ol> <p>Untuk child widget, kita membuat sebuah fungsi callback yang mana sebuah fungsi di parent widget yang akan dipanggil dengan trigger dari child.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ChildWidget</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>

  <span class="n">Function</span><span class="o">(</span><span class="n">Color</span><span class="o">,</span> <span class="kt">String</span><span class="o">,</span> <span class="kt">bool</span><span class="o">)</span> <span class="n">callback</span><span class="o">;</span>
  <span class="n">ToolsContainer</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">callback</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">State</span><span class="o">&lt;</span><span class="n">StatefulWidget</span><span class="o">&gt;</span> <span class="n">createState</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">_ToolsContainer</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="o">...</span>

<span class="nl">onTap:</span> <span class="o">()</span> <span class="o">{</span>
    <span class="n">widget</span><span class="o">.</span><span class="na">callback</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">_sampleImages</span><span class="o">[</span><span class="n">position</span><span class="o">],</span> <span class="kc">false</span><span class="o">);</span>

<span class="o">},</span>
</code></pre></div></div> <p>Kemudian pada parent widget, kita mendeklarasikan child widget seperti ini</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nl">child:</span> <span class="k">new</span> <span class="n">ToolsContainer</span><span class="o">(</span><span class="n">callback_set_background</span><span class="o">),</span>
</code></pre></div></div> <ol> <li>Mengubah parent dari child Fungsi callback_set_background dalam widget parent akan ditrigger untuk melakukan perubahan pada child 2. Berikut ini bagaimana kita mentrigger perubahan child 2 dari parent.</li> </ol> <p>Widget parent kita bungkus dengan sebuah widget perantara yang kita namakan ParentProvider.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ParentProvider</span> <span class="kd">extends</span> <span class="n">InheritedWidget</span> <span class="o">{</span>

  <span class="kd">final</span> <span class="kt">String</span> <span class="n">bgUrl</span><span class="o">;</span>

  <span class="n">ParentProvider</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">bgUrl</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="kt">bool</span> <span class="n">updateShouldNotify</span><span class="o">(</span><span class="n">ParentProvider</span> <span class="n">oldWidget</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">static</span> <span class="n">ParentProvider</span> <span class="n">of</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">=&gt;</span>
      <span class="n">context</span><span class="o">.</span><span class="na">inheritFromWidgetOfExactType</span><span class="o">(</span><span class="n">ParentProvider</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>Di parent provider kita menyimpan setiap value milik parent widget yang akan diekspos ke widget child. Sehingga, ketika salah satu value tersebut mengalami perubahan widget child akan otomatis terupdate. Kita menempatkan widget parent dalam parent provider, sehingga fungsi build akan nampak seperti ini.</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ParentProvider</span><span class="o">(</span>
        <span class="n">recentStates</span><span class="o">[</span><span class="n">activeState</span><span class="o">].</span><span class="na">_chosen_image_url</span><span class="o">,</span>
        <span class="k">new</span> <span class="n">Scaffold</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div></div> <p>Kemudian kita bisa menggunakan value milik parent dan menerima update di widget child dengan cara demikian</p> <div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">selectedBgUrl</span> <span class="o">=</span> <span class="n">ParentProvider</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">context</span><span class="o">).</span><span class="na">bgUrl</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
